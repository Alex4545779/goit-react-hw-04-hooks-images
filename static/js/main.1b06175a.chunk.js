(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{19:function(e,t,c){},21:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),o=c(5),r=c.n(o),s=(c(19),c(9)),i=c(3),l=c(7);var u={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=22948262-953a9601ef8ec29dc611c2152&image_type=photo&orientation=horizontal&per_page=12\n")).then((function(e){if(e.ok)return e.json()}))}},j=(c(20),c(21),c(1));function b(e){var t=e.onSubmit,c=Object(n.useState)(""),a=Object(i.a)(c,2),o=a[0],r=a[1];return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{onSubmit:t,className:"SearchForm",children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",onClick:function(e){e.preventDefault(),""!==o.trim()?(t(o),r("")):Object(l.b)("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441")},children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",name:"imageSearch",value:o,onChange:function(e){r(e.currentTarget.value.toLowerCase())}})]})})}c(23);function m(e){var t=e.id,c=e.tags,n=e.smallImage,a=e.largeImage,o=e.onClickItem;return Object(j.jsx)("li",{className:"ImageGalleryItem",children:Object(j.jsx)("img",{className:"ImageGalleryItem-image",alt:c,src:n,"data-source":a,onClick:function(){o(a)}})},t)}c(24);function d(e){var t=e.images,c=e.toggleModal;return Object(n.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[t]),Object(j.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,n=e.tags,a=e.webformatURL,o=e.largeImageURL;return Object(j.jsx)(m,{tags:n,smallImage:a,largeImage:o,onClickItem:function(){c(o)}},t)}))})}var h=c(10),O=c(11),f=c(14),g=c(13),p=c(12),x=c.n(p),v=(c(45),function(e){Object(f.a)(c,e);var t=Object(g.a)(c);function c(){return Object(h.a)(this,c),t.apply(this,arguments)}return Object(O.a)(c,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"loader-wrapper",children:Object(j.jsx)(x.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3,visible:!0})})}}]),c}(n.Component));c(46);function S(e){var t=e.loadMore;return Object(j.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})}c(47);function k(e){var t=e.onClick,c=e.image,a=e.closeModal;Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.code&&a()};return Object(j.jsx)("div",{className:"Overlay",onClick:t,tabIndex:"0",children:Object(j.jsx)("div",{className:"Modal",children:Object(j.jsx)("img",{src:c,alt:""})})})}c(48);function w(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],o=Object(n.useState)([]),r=Object(i.a)(o,2),m=r[0],h=r[1],O=Object(n.useState)("idle"),f=Object(i.a)(O,2),g=f[0],p=f[1],x=Object(n.useState)(1),w=Object(i.a)(x,2),y=w[0],I=w[1],N=Object(n.useState)(""),C=Object(i.a)(N,2),F=C[0],M=C[1],E=Object(n.useState)(!1),L=Object(i.a)(E,2),G=L[0],q=L[1],B=Object(n.useState)(""),J=Object(i.a)(B,2),R=J[0],T=J[1],U=Object(n.useCallback)((function(){u.fetchImages(c,y).then((function(e){h((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),p("resolved")})).catch((function(e){T(e),p("rejected")}))}),[c,y]),_=function(e){q(!G),M(e)};return Object(n.useEffect)((function(){0!==c.length&&U()}),[c,y,U]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{onSubmit:function(e){e!==c&&(h([]),a(e))}}),"pending"===g&&Object(j.jsx)(v,{}),"idle"===g&&Object(j.jsx)("div",{className:"message-wrapper",children:Object(j.jsx)("p",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441..."})}),Object(j.jsx)(d,{images:m,toggleModal:function(e){return _(e)}}),0!==m.length&&Object(j.jsx)(S,{loadMore:function(){0!==c.length&&I(y+1)}}),G&&Object(j.jsx)(k,{onClick:function(){_()},image:F,closeModal:function(){q(!1)}}),Object(j.jsx)(l.a,{autoClose:3e3}),0===m.length&&"resolved"===g?Object(j.jsxs)("div",{className:"message-wrapper",children:[Object(j.jsx)("p",{children:"\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443"}),Object(j.jsx)("p",{className:"message-format",children:c}),Object(j.jsx)("p",{children:"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}):null,"rejected"===g&&Object(j.jsx)("div",{children:R})]})}r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.querySelector("#root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.1b06175a.chunk.js.map